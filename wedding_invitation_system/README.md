# מערכת ניהול הזמנות חתונה עם WhatsApp Bot

מערכת מלאה לניהול הזמנות חתונה הכוללת:
- בוט WhatsApp לשליחת הזמנות
- אתר אינטרנט עם קישורים ייחודיים לכל אורח
- מערכת RSVP מתקדמת
- כלי לסידור ישיבה
- ממשק ניהול מלא

## תכונות עיקריות

### 🤖 בוט WhatsApp (חינמי)
- שליחת הזמנות אוטומטיות לכל האורחים
- תזכורות לאורחים שלא הגיבו
- שימוש ב-Twilio (חינמי עד 1000 הודעות)

### 🌐 אתר RSVP
- קישור ייחודי לכל אורח
- טופס אישור הגעה עם בחירת מספר מגיעים
- קוד QR לכל הזמנה
- תמיכה בהערות מיוחדות (דרישות תזונה וכו')

### 📊 ניהול מתקדם
- מעקב אחר כל התגובות
- סטטיסטיקות בזמן אמת
- ניהול רשימת אורחים
- ייצוא נתונים

### 🪑 סידור ישיבה
- יצירת שולחנות
- הקצאת אורחים לשולחנות
- מעקב אחר תפוסה
- אלגוריתם אוטומטי (בפיתוח)

## התקנה

### 1. התקנת תלות
```bash
cd wedding_invitation_system
pip install -r requirements.txt
```

### 2. הגדרת משתני סביבה
ערוך את קובץ `.env`:

```env
# הגדרות Twilio לWhatsApp (חובה לשליחת הודעות)
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here
TWILIO_WHATSAPP_NUMBER=whatsapp:+14155238886

# הגדרות האתר
SECRET_KEY=your-very-secret-key-here
WEBSITE_URL=http://localhost:5000
WEDDING_DATE=2025-12-25
COUPLE_NAMES=חתן וכלה

# בסיס נתונים
DATABASE_URL=sqlite:///wedding.db

DEBUG=True
```

### 3. הפעלת האתר
```bash
python app.py
```

האתר יהיה זמין בכתובת: http://localhost:5000

## קבלת פרטי Twilio (חינמי)

### שלב 1: הרשמה ל-Twilio
1. גש ל: https://www.twilio.com/try-twilio
2. הירשם עם מייל ומספר טלפון
3. תקבל $15 קרדיט חינם

### שלב 2: הגדרת WhatsApp
1. בלוח הבקרה של Twilio, לך ל: **Messaging** → **Try it out** → **Send a WhatsApp message**
2. עקוב אחר ההוראות להפעלת WhatsApp Sandbox
3. שלח הודעה ל: **+1 415 523 8886** עם הקוד: `join [your-sandbox-keyword]`

### שלב 3: העתקת הפרטים
1. **Account SID**: נמצא בדף הבית של Twilio
2. **Auth Token**: לחץ על "Show" ליד Auth Token
3. **WhatsApp Number**: `whatsapp:+14155238886` (מספר ה-Sandbox)

## שימוש במערכת

### 1. הוספת אורחים
- לך ל: http://localhost:5000/add_guest
- הזן שם, טלפון ומספר מוזמנים
- המערכת תיצור קישור ייחודי לכל אורח

### 2. שליחת הזמנות
```bash
# שליחת הזמנות לכל האורחים שעדיין לא קיבלו
python whatsapp_bot.py send_all

# שליחת תזכורות
python whatsapp_bot.py send_reminders
```

### 3. מעקב אחר תגובות
- בדף הבית: סטטיסטיקות כלליות
- בעמוד הניהול: רשימה מפורטת של כל האורחים

### 4. סידור ישיבה
- לך לעמוד "סידור ישיבה"
- צור שולחנות והקצה אורחים
- עקוב אחר התפוסה

## מבנה הפרויקט

```
wedding_invitation_system/
├── app.py                 # האפליקציה הראשית
├── whatsapp_bot.py       # בוט WhatsApp
├── requirements.txt      # תלות Python
├── .env                 # משתני סביבה
├── wedding.db           # בסיס נתונים (ייווצר אוטומטית)
└── templates/           # תבניות HTML
    ├── base.html        # תבנית בסיס
    ├── index.html       # דף הבית
    ├── admin.html       # ניהול אורחים
    ├── add_guest.html   # הוספת אורח
    ├── rsvp.html       # טופס RSVP
    ├── rsvp_success.html # אישור RSVP
    └── seating.html    # סידור ישיבה
```

## פיצ'רים מתקדמים

### אוטומציה מלאה
- שליחה אוטומטית של הזמנות
- תזכורות אוטומטיות
- עדכונים בזמן אמת

### אבטחה
- טוקן ייחודי לכל אורח
- אין אפשרות לגישה לנתוני אורחים אחרים
- הצפנת נתונים רגישים

### נגישות
- תמיכה בעברית מלאה
- עיצוב רספונסיבי לנייד
- נגישות לאנשים עם מוגבלות

## פתרון בעיות נפוצות

### שגיאות שליחת WhatsApp
```
❌ שגיאה בשליחה ל-[שם]: HTTP 400 error
```
**פתרון**: ודא שמספר הטלפון תקין ובפורמט הנכון (+972501234567)

### בעיות הרשאות Twilio
```
❌ Twilio לא מוגדר
```
**פתרון**: בדוק ש-Account SID ו-Auth Token נכונים ב-.env

### שגיאות בסיס נתונים
```
❌ No such table: guest
```
**פתרון**: הפעל את האפליקציה פעם אחת ליצירת הטבלאות

## שדרוגים עתידיים

- [ ] אלגוריתם אוטומטי לסידור ישיבה
- [ ] התממשקות עם Google Calendar
- [ ] שליחת עדכונים SMS
- [ ] מערכת תשלומים
- [ ] אפליקציה ניידת
- [ ] בוט Telegram נוסף
- [ ] מפת המקום
- [ ] גלריית תמונות

## תמיכה

לשאלות או בעיות:
1. בדוק את קובץ ה-README
2. ודא שכל התלות מותקנות
3. בדוק את משתני הסביבה ב-.env
4. הפעל במצב DEBUG לפרטי שגיאה

## רישיון

פרויקט זה נוצר לשימוש אישי. ניתן להשתמש, לשנות ולהפיץ בחופשיות.

---

**בהצלחה עם החתונה! 💕**